[tox]
requires =
    tox>=4
skipsdist = True

[testenv]
description = run unit tests
passenv = *
setenv =
    QT_QPA_PLATFORM = offscreen
deps =
    -r requirements/tests.txt
    -r requirements/anki-qt6-current.txt
commands =
    pytest -v --cov=cross_field_highlighter --cov-report=xml --cov-config=tox.ini --cov-branch {posargs:tests -m "not integration"}
